{
  when(stackManipulation.isValid()).thenReturn(true);
  when(stackManipulation.apply(methodVisitor,implementationContext)).thenReturn(new StackManipulation.Size(0,0));
  StackManipulation terminated=new InstrumentedType.TypeInitializer.Simple(stackManipulation).terminate();
  assertThat(terminated.isValid(),is(true));
  verify(stackManipulation).isValid();
  terminated.apply(methodVisitor,implementationContext);
  verify(stackManipulation).apply(methodVisitor,implementationContext);
  verify(methodVisitor).visitInsn(Opcodes.RETURN);
  verifyNoMoreInteractions(stackManipulation);
  verifyZeroInteractions(implementationContext);
}
