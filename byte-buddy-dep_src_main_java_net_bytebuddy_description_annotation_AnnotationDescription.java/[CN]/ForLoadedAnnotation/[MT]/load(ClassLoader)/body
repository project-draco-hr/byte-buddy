{
  ClassLoader thisClassLoader=AccessController.doPrivileged(new ClassLoaderAction(annotation.getClass()));
  ClassLoader otherClassLoader=classLoader;
  while (otherClassLoader != null) {
    if (otherClassLoader == thisClassLoader) {
      break;
    }
    otherClassLoader=AccessController.doPrivileged(new ParentClassLoaderAction(otherClassLoader));
  }
  if (otherClassLoader != thisClassLoader) {
    throw new IllegalArgumentException(annotation + " is not loaded using " + classLoader);
  }
  return load();
}
