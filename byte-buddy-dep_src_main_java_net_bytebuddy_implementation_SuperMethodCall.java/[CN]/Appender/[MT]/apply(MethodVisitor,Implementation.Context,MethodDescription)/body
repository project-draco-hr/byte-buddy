{
  StackManipulation superMethodCall=instrumentedMethod.isDefaultMethod() && implementationTarget.getTypeDescription().getInterfaces().asRawTypes().contains(instrumentedMethod.getDeclaringType().asRawType()) ? implementationTarget.invokeDefault(instrumentedMethod.getDeclaringType().asRawType(),instrumentedMethod.asToken()) : implementationTarget.invokeSuper(instrumentedMethod,Target.MethodLookup.Default.EXACT);
  if (!superMethodCall.isValid()) {
    throw new IllegalStateException("Cannot call super (or default) method of " + instrumentedMethod);
  }
  StackManipulation.Size stackSize=new StackManipulation.Compound(MethodVariableAccess.loadThisReferenceAndArguments(instrumentedMethod),superMethodCall,terminationHandler.of(instrumentedMethod)).apply(methodVisitor,implementationContext);
  return new Size(stackSize.getMaximalSize(),instrumentedMethod.getStackSize());
}
