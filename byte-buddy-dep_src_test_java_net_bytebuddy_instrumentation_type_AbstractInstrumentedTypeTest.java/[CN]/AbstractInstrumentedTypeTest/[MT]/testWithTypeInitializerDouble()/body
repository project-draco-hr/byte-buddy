{
  InstrumentedType instrumentedType=makePlainInstrumentedType();
  assertThat(instrumentedType.getDeclaredFields().size(),is(0));
  StackManipulation first=mock(StackManipulation.class), second=mock(StackManipulation.class);
  when(first.apply(methodVisitor,instrumentationContext)).thenReturn(new StackManipulation.Size(0,0));
  when(second.apply(methodVisitor,instrumentationContext)).thenReturn(new StackManipulation.Size(0,0));
  instrumentedType=instrumentedType.withInitializer(first).withInitializer(second);
  InstrumentedType.TypeInitializer typeInitializer=instrumentedType.getTypeInitializer();
  assertThat(typeInitializer.isDefined(),is(true));
  typeInitializer.apply(methodVisitor,instrumentationContext);
  verify(first).apply(methodVisitor,instrumentationContext);
  verify(second).apply(methodVisitor,instrumentationContext);
}
