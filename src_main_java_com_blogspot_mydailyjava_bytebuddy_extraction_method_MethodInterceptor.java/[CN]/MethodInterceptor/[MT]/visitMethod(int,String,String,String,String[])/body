{
  MethodVisitor methodVisitor=super.visitMethod(access,name,desc,signature,exceptions);
  if (methodVisitor != null) {
    MethodContext methodContext=new MethodContext(access,name,desc,signature,exceptions);
    ByteCodeAppender.Size size=new ByteCodeAppender.Size(0,methodContext.getType().getArgumentsAndReturnSizes());
    methodVisitor.visitCode();
    for (    ByteCodeAppender byteCodeAppender : appenderSelector.findAppenders(classContext,methodContext)) {
      size=size.merge(byteCodeAppender.apply(methodVisitor,classContext,methodContext));
    }
    methodVisitor.visitMaxs(size.getOperandStackSize(),size.getLocalVariableSize());
    methodVisitor.visitEnd();
  }
  return methodVisitor;
}
