{
  Class<?> type=new ByteBuddy().redefine(NonAssignableReturnTypeAdvice.class).visit(Advice.to(NonAssignableReturnTypeAdvice.class).on(named(FOO))).make().load(ClassLoadingStrategy.BOOTSTRAP_LOADER,ClassLoadingStrategy.Default.WRAPPER).getLoaded();
  try {
    type.getDeclaredMethod(FOO).invoke(type.getConstructor().newInstance());
    fail();
  }
 catch (  InvocationTargetException exception) {
    assertThat(exception.getCause(),instanceOf(ClassCastException.class));
  }
}
