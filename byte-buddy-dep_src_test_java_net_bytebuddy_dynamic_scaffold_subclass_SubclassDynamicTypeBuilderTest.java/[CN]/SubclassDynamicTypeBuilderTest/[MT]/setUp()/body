{
  when(simpleInstrumentation.prepare(any(InstrumentedType.class))).then(new Answer<InstrumentedType>(){
    @Override public InstrumentedType answer(    InvocationOnMock invocation) throws Throwable {
      return (InstrumentedType)invocation.getArguments()[0];
    }
  }
);
  when(simpleInstrumentation.appender(any(Instrumentation.Target.class))).thenReturn(byteCodeAppender);
  when(byteCodeAppender.appendsCode()).thenReturn(true);
  when(byteCodeAppender.apply(any(MethodVisitor.class),any(Instrumentation.Context.class),any(MethodDescription.class))).thenAnswer(new Answer<ByteCodeAppender.Size>(){
    @Override public ByteCodeAppender.Size answer(    InvocationOnMock invocation) throws Throwable {
      MethodVisitor methodVisitor=(MethodVisitor)invocation.getArguments()[0];
      MethodDescription methodDescription=(MethodDescription)invocation.getArguments()[2];
      methodVisitor.visitInsn(Opcodes.ICONST_0);
      methodVisitor.visitInsn(Opcodes.IRETURN);
      return new ByteCodeAppender.Size(1,methodDescription.getStackSize());
    }
  }
);
  when(preparingInstrumentation.prepare(any(InstrumentedType.class))).then(new Answer<InstrumentedType>(){
    @Override public InstrumentedType answer(    InvocationOnMock invocation) throws Throwable {
      return ((InstrumentedType)invocation.getArguments()[0]).withField(BAZ,new TypeDescription.ForLoadedType(Object.class),0).withMethod(QUX,new TypeDescription.ForLoadedType(int.class),Collections.<TypeDescription>emptyList(),Collections.<TypeDescription>emptyList(),0).withInitializer(loadedTypeInitializer);
    }
  }
);
  when(preparingInstrumentation.appender(any(Instrumentation.Target.class))).thenReturn(byteCodeAppender);
}
