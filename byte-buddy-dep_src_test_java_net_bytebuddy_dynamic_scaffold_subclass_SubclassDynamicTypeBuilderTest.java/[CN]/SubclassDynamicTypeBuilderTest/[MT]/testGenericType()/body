{
  Class<?> dynamicType=create(GenericType.Inner.class).method(named(FOO).or(named("call"))).intercept(StubMethod.INSTANCE).make().load(getClass().getClassLoader(),ClassLoadingStrategy.Default.INJECTION).getLoaded();
  assertThat(dynamicType.getTypeParameters().length,is(0));
  assertThat(dynamicType.getGenericSuperclass(),instanceOf(Class.class));
  assertThat(dynamicType.getGenericSuperclass(),is((Type)GenericType.Inner.class));
  assertThat(dynamicType.getGenericInterfaces().length,is(0));
  Method foo=dynamicType.getDeclaredMethod(FOO,String.class);
  assertThat(foo.getTypeParameters().length,is(2));
  assertThat(foo.getTypeParameters()[0].getName(),is("V"));
  assertThat(foo.getTypeParameters()[0].getBounds().length,is(1));
  assertThat(foo.getTypeParameters()[0].getBounds()[0],is((Type)String.class));
  assertThat(foo.getTypeParameters()[1].getName(),is("W"));
  assertThat(foo.getTypeParameters()[1].getBounds().length,is(1));
  assertThat(foo.getTypeParameters()[1].getBounds()[0],is((Type)Exception.class));
  assertThat(foo.getGenericReturnType(),instanceOf(ParameterizedType.class));
  assertThat(((ParameterizedType)foo.getGenericReturnType()).getActualTypeArguments().length,is(1));
  Type parameterType=((ParameterizedType)foo.getGenericReturnType()).getActualTypeArguments()[0];
  if (ClassFileVersion.forCurrentJavaVersion().compareTo(ClassFileVersion.JAVA_V7) < 0) {
    assertThat(parameterType,instanceOf(GenericArrayType.class));
    assertThat(((GenericArrayType)parameterType).getGenericComponentType(),is((Type)String.class));
  }
 else {
    assertThat(parameterType,is((Type)String[].class));
  }
  assertThat(foo.getGenericParameterTypes().length,is(1));
  assertThat(foo.getGenericParameterTypes()[0],is((Type)foo.getTypeParameters()[0]));
  assertThat(foo.getGenericExceptionTypes().length,is(1));
  assertThat(foo.getGenericExceptionTypes()[0],is((Type)foo.getTypeParameters()[1]));
  Method call=dynamicType.getDeclaredMethod("call");
  assertThat(call.getGenericReturnType(),is(((ParameterizedType)GenericType.Inner.class.getGenericInterfaces()[0]).getActualTypeArguments()[0]));
}
