{
  ClassLoader classLoader=new ByteArrayClassLoader(ClassLoadingStrategy.BOOTSTRAP_LOADER,ClassFileExtraction.of(EnclosingType.class),null,AccessController.getContext(),ByteArrayClassLoader.PersistenceHandler.LATENT,PackageDefinitionStrategy.NoOp.INSTANCE);
  Class<?> redefined=new ByteBuddy().redefine(EnclosingType.LOCAL).modifiers(Visibility.PUBLIC).visit(new InnerClassValidator.Wrapper(EnclosingType.LOCAL,Opcodes.ACC_PUBLIC)).make().load(classLoader,ClassLoadingStrategy.Default.INJECTION).getLoaded();
  assertThat(redefined.isAnonymousClass(),is(EnclosingType.LOCAL.isAnonymousClass()));
  assertThat(redefined.isLocalClass(),is(EnclosingType.LOCAL.isLocalClass()));
  assertThat(redefined.isMemberClass(),is(EnclosingType.LOCAL.isMemberClass()));
  assertThat(redefined.getModifiers(),is(Modifier.PUBLIC | EnclosingType.LOCAL.getModifiers()));
}
