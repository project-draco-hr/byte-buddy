{
  TypeWriter.FieldPool fieldPool=new FieldRegistry.Default().include(knownFieldToken,distinctFactory,defaultValue).compile(instrumentedType);
  assertThat(fieldPool.target(knownField).getFieldAppender(),is(distinct));
  assertThat(fieldPool.target(knownField).resolveDefault(otherDefaultValue),is(defaultValue));
  assertThat(fieldPool.target(unknownField).resolveDefault(otherDefaultValue),is(otherDefaultValue));
  assertThat(fieldPool.target(unknownField).getFieldAppender(),is((FieldAttributeAppender)new FieldAttributeAppender.ForField(unknownField,AnnotationAppender.ValueFilter.AppendDefaults.INSTANCE)));
}
