{
  try {
    Instrumentation instrumentation=doGetInstrumentation();
    if (instrumentation != null) {
      return instrumentation;
    }
  }
 catch (  Exception ignored) {
  }
  try {
    doInstall();
  }
 catch (  Exception e) {
    throw new IllegalStateException("The programmatic installation of the Byte Buddy agent is only " + "possible on the OpenJDK and JDKs with a compatible 'tools.jar'",e);
  }
  return getInstrumentation();
}
