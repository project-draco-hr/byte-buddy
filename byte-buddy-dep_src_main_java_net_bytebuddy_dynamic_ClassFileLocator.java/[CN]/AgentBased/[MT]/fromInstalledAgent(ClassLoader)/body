{
  try {
    return new AgentBased((Instrumentation)ClassLoader.getSystemClassLoader().loadClass(INSTALLER_TYPE).getDeclaredField(INSTRUMENTATION_FIELD).get(STATIC_FIELD),classLoader);
  }
 catch (  RuntimeException exception) {
    throw exception;
  }
catch (  Exception exception) {
    throw new IllegalStateException("The Byte Buddy agent is not installed or not accessible",exception);
  }
}
