{
  when(assigner.assign(any(TypeDescription.class),any(TypeDescription.class),anyBoolean())).thenReturn(LegalTrivialAssignment.INSTANCE);
  when(source.getReturnType()).thenReturn(new TypeDescription.ForLoadedType(Object.class));
  when(target.getReturnType()).thenReturn(new TypeDescription.ForLoadedType(Void.class));
  when(target.getParameterTypes()).thenReturn(makeTypeList(int.class,long.class));
  when(target.getStackSize()).thenReturn(3);
  when(target.getParameterAnnotations()).thenReturn(new Annotation[2][0]);
  when(target.getAnnotations()).thenReturn(new Annotation[0]);
  AnnotationDrivenBinder.ArgumentBinder.IdentifiedBinding<?> firstBinding=prepareArgumentBinder(firstArgumentBinder,FirstPseudoAnnotation.class,new Key(FOO),true);
  AnnotationDrivenBinder.ArgumentBinder.IdentifiedBinding<?> secondBinding=prepareArgumentBinder(secondArgumentBinder,SecondPseudoAnnotation.class,new Key(BAR),true);
  Iterator<Annotation> defaultsIterator=prepareDefaultProvider(defaultProvider,Arrays.asList(secondPseudoAnnotation,firstPseudoAnnotation));
  MethodDelegationBinder methodDelegationBinder=new AnnotationDrivenBinder(Arrays.<AnnotationDrivenBinder.ArgumentBinder<?>>asList(firstArgumentBinder,secondArgumentBinder),defaultProvider,assigner);
  MethodDelegationBinder.Binding binding=methodDelegationBinder.bind(typeDescription,source,target);
  assertThat(binding.isValid(),is(true));
  assertThat(binding.getTarget(),is(target));
  assertThat(binding.getTargetParameterIndex(new Key(FOO)),is(1));
  assertThat(binding.getTargetParameterIndex(new Key(BAR)),is(0));
  Assignment.Size size=binding.apply(methodVisitor);
  assertThat(size.getSizeImpact(),is(-2));
  assertThat(size.getMaximalSize(),is(0));
  verify(methodVisitor).visitMethodInsn(Opcodes.INVOKESTATIC,FOO,BAR,BAZ);
  verifyNoMoreInteractions(methodVisitor);
  verify(source,atLeast(1)).getReturnType();
  verify(target,atLeast(1)).getReturnType();
  verify(target,atLeast(1)).getParameterTypes();
  verify(target,atLeast(1)).getParameterAnnotations();
  verify(target,atLeast(1)).getAnnotations();
  verify(assigner).assign(new TypeDescription.ForLoadedType(Void.class),new TypeDescription.ForLoadedType(Object.class),false);
  verifyNoMoreInteractions(assigner);
  verify(firstArgumentBinder,atLeast(1)).getHandledType();
  verify((AnnotationDrivenBinder.ArgumentBinder)firstArgumentBinder).bind(firstPseudoAnnotation,1,source,target,typeDescription,assigner);
  verifyNoMoreInteractions(firstArgumentBinder);
  verify(secondArgumentBinder,atLeast(1)).getHandledType();
  verify((AnnotationDrivenBinder.ArgumentBinder)secondArgumentBinder).bind(secondPseudoAnnotation,0,source,target,typeDescription,assigner);
  verifyNoMoreInteractions(secondArgumentBinder);
  verify(defaultsIterator,times(2)).hasNext();
  verify(defaultsIterator,times(2)).next();
  verifyNoMoreInteractions(defaultsIterator);
  verify(firstBinding,atLeast(1)).isValid();
  verify(firstBinding).getAssignment();
  verify(firstBinding).getIdentificationToken();
  verify(secondBinding,atLeast(1)).isValid();
  verify(secondBinding).getAssignment();
  verify(secondBinding).getIdentificationToken();
}
