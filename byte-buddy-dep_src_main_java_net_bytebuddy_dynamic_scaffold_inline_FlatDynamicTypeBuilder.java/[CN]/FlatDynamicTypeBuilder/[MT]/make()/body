{
  MethodRegistry.Prepared preparedMethodRegistry=methodRegistry.prepare(applyRecordedMembersTo(new FlatInstrumentedType(classFileVersion,targetType,interfaceTypes,modifiers,namingStrategy)));
  TargetHandler.Prepared preparedTargetHandler=targetHandler.prepare(ignoredMethods,classFileVersion,preparedMethodRegistry.getInstrumentedType());
  MethodRegistry.Compiled compiledMethodRegistry=preparedMethodRegistry.compile(preparedTargetHandler.factory(bridgeMethodResolverFactory),methodLookupEngineFactory.make(classFileVersion),MethodFlatteningDelegation.Factory.INSTANCE);
  return new TypeWriter.Default<T>(preparedMethodRegistry.getInstrumentedType(),preparedMethodRegistry.getLoadedTypeInitializer(),preparedTargetHandler.getAuxiliaryTypes(),new TypeWriter.Engine.ForRedefinition(preparedMethodRegistry.getInstrumentedType(),classFileVersion,compiledMethodRegistry.getInvokableMethods().filter(isOverridable().or(isDeclaredBy(preparedMethodRegistry.getInstrumentedType())).and(not(ignoredMethods))),classVisitorWrapperChain,attributeAppender,fieldRegistry.prepare(preparedMethodRegistry.getInstrumentedType()).compile(TypeWriter.FieldPool.Entry.NoOp.INSTANCE),compiledMethodRegistry,new TypeWriter.Engine.ForRedefinition.InputStreamProvider.ForClassFileLocator(targetType,classFileLocator),null)).make(new TypeExtensionDelegate(preparedMethodRegistry.getInstrumentedType(),classFileVersion));
}
