{
  when(resolvedMethodFilter.matches(instrumentedMethod)).thenReturn(true);
  when(firstFilter.matches(instrumentedMethod)).thenReturn(true);
  when(secondFilter.matches(instrumentedMethod)).thenReturn(true);
  MethodRegistry.Prepared methodRegistry=new MethodRegistry.Default().append(firstMatcher,firstHandler,firstFactory,methodTransformer).append(firstMatcher,firstHandler,firstFactory,methodTransformer).append(secondMatcher,firstHandler,firstFactory,methodTransformer).append(secondMatcher,firstHandler,secondFactory,methodTransformer).append(secondMatcher,secondHandler,secondFactory,methodTransformer).append(firstMatcher,secondHandler,secondFactory,methodTransformer).append(firstMatcher,firstHandler,secondFactory,methodTransformer).append(firstMatcher,secondHandler,firstFactory,methodTransformer).prepare(firstType,methodGraphCompiler,methodFilter);
  assertThat(methodRegistry.getInstrumentedType(),is(typeDescription));
  assertThat(methodRegistry.getInstrumentedMethods(),is((MethodList)new MethodList.Explicit(instrumentedMethod)));
  assertThat(methodRegistry.getTypeInitializer(),is(typeInitializer));
  assertThat(methodRegistry.getLoadedTypeInitializer(),is(loadedTypeInitializer));
  verify(firstHandler).prepare(firstType);
  verify(secondHandler).prepare(secondType);
}
