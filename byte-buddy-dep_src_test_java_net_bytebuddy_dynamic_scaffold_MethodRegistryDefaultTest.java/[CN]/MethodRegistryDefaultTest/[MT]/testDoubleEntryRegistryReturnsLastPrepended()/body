{
  MethodRegistry.Compiled compiled=new MethodRegistry.Default().prepend(latentMatchesKnownMethod,otherInstrumentation,otherAttributeAppenderFactory).prepend(latentMatchesKnownMethod,simpleInstrumentation,simpleAttributeAppenderFactory).compile(basicInstrumentedType,fallback);
  assertThat(compiled.target(knownMethod).isDefineMethod(),is(true));
  assertThat(compiled.target(knownMethod).getAttributeAppender(),is(simpleAttributeAppender));
  assertThat(compiled.target(knownMethod).getByteCodeAppender(),is(simpleByteCodeAppender));
  assertThat(compiled.target(unknownMethod),is(fallback));
  verify(simpleInstrumentation).prepare(basicInstrumentedType);
  verify(simpleInstrumentation).appender(basicInstrumentedType);
  verify(simpleAttributeAppenderFactory).make(basicInstrumentedType);
  verifyNoMoreInteractions(simpleInstrumentation);
  verifyNoMoreInteractions(simpleAttributeAppenderFactory);
  verify(otherInstrumentation).prepare(basicInstrumentedType);
  verify(otherInstrumentation).appender(basicInstrumentedType);
  verify(otherAttributeAppenderFactory).make(basicInstrumentedType);
  verifyNoMoreInteractions(otherInstrumentation);
  verifyNoMoreInteractions(otherAttributeAppenderFactory);
}
