{
  ClassVisitorWrapper.Chain chain=new ClassVisitorWrapper.Chain(prepend,wrapper,append);
  assertThat(chain.wrap(prependVisitor),is(resultVisitor));
  verify(prepend).wrap(prependVisitor);
  verifyNoMoreInteractions(prepend);
  verify(wrapper).wrap(wrapperVisitor);
  verifyNoMoreInteractions(wrapper);
  verify(append).wrap(appendVisitor);
  verifyNoMoreInteractions(append);
}
