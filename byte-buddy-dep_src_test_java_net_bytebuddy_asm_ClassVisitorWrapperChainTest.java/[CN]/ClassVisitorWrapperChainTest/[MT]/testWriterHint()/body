{
  ClassVisitorWrapper.Chain chain=new ClassVisitorWrapper.Chain();
  chain=chain.append(wrapper).append(append).prepend(prepend);
  assertThat(chain.wrapWriter(FOO),is(BAZ));
  verify(prepend).wrapWriter(FOO);
  verifyNoMoreInteractions(prepend);
  verify(wrapper).wrapWriter(BAR);
  verifyNoMoreInteractions(wrapper);
  verify(append).wrapWriter(QUX);
  verifyNoMoreInteractions(append);
}
