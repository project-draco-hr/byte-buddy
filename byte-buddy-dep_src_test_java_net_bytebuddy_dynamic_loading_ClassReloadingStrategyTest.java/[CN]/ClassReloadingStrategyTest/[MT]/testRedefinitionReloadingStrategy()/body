{
  Instrumentation instrumentation=spy(ByteBuddyAgent.getInstrumentation());
  Foo foo=new Foo();
  assertThat(foo.foo(),is(FOO));
  ClassReloadingStrategy classReloadingStrategy=new ClassReloadingStrategy(instrumentation,ClassReloadingStrategy.Engine.REDEFINITION);
  new ByteBuddy().redefine(Foo.class).method(named(FOO)).intercept(FixedValue.value(BAR)).make().load(Foo.class.getClassLoader(),classReloadingStrategy);
  assertThat(foo.foo(),is(BAR));
  classReloadingStrategy.reset(Foo.class);
  assertThat(foo.foo(),is(FOO));
}
