{
  assertThat(ByteBuddyAgent.installOnOpenJDK(),instanceOf(Instrumentation.class));
  Foo foo=new Foo();
  assertThat(foo.foo(),is(FOO));
  ClassReloadingStrategy classReloadingStrategy=new ClassReloadingStrategy(ByteBuddyAgent.getInstrumentation(),ClassReloadingStrategy.Engine.RETRANSFORMATION);
  new ByteBuddy().redefine(Foo.class).method(named(FOO)).intercept(FixedValue.value(BAR)).make().load(Foo.class.getClassLoader(),classReloadingStrategy);
  assertThat(foo.foo(),is(BAR));
  classReloadingStrategy.reset(Foo.class);
  assertThat(foo.foo(),is(FOO));
}
