{
  when(rawMatcher.matches(TypeDescription.OBJECT,REDEFINED.getClassLoader(),REDEFINED,REDEFINED.getProtectionDomain())).thenReturn(true);
  when(instrumentation.isModifiableClass(REDEFINED)).thenReturn(true);
  when(instrumentation.isRedefineClassesSupported()).thenReturn(true);
  when(binaryLocator.initialize(REDEFINED.getClassLoader())).thenReturn(initialized);
  ClassFileTransformer classFileTransformer=new AgentBuilder.Default(byteBuddy).withInitialization(AgentBuilder.InitializationStrategy.NoOp.INSTANCE).withRedefinitionStrategy(AgentBuilder.RedefinitionStrategy.REDEFINITION).withBinaryLocator(binaryLocator).withTypeStrategy(typeStrategy).withListener(listener).withoutNativeMethodPrefix().type(rawMatcher).transform(transformer).installOn(instrumentation);
  verifyZeroInteractions(listener);
  verify(instrumentation).addTransformer(classFileTransformer,false);
  verify(instrumentation).getAllLoadedClasses();
  verify(instrumentation).isModifiableClass(REDEFINED);
  verify(instrumentation).retransformClasses(REDEFINED);
  verify(instrumentation).isRedefineClassesSupported();
  verifyNoMoreInteractions(instrumentation);
  verify(rawMatcher).matches(TypeDescription.OBJECT,REDEFINED.getClassLoader(),REDEFINED,REDEFINED.getProtectionDomain());
  verifyNoMoreInteractions(rawMatcher);
}
