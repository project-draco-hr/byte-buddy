{
  ClassReader classReader=new ClassReader(binaryRepresentation);
  ClassWriter classWriter=FrameComputingClassWriter.of(classReader,asmVisitorWrapper.mergeWriter(ASM_NO_FLAGS),classFileLocator);
  classReader.accept(writeTo(asmVisitorWrapper.wrap(instrumentedType,new ValidatingClassVisitor(classWriter)),implementationContext),asmVisitorWrapper.mergeReader(ASM_NO_FLAGS));
  return classWriter.toByteArray();
}
