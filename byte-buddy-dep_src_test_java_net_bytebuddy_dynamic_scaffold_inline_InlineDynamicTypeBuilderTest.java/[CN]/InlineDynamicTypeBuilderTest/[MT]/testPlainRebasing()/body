{
  Class<?> loaded=new InlineDynamicTypeBuilder<Foo>(ClassFileVersion.forCurrentJavaVersion(),new NamingStrategy.Fixed(FOOBAR),new TypeDescription.ForLoadedType(Foo.class),new TypeList.ForLoadedType(Arrays.<Class<?>>asList(Serializable.class)),Opcodes.ACC_PUBLIC,TypeAttributeAppender.NoOp.INSTANCE,isDeclaredBy(Object.class),BridgeMethodResolver.Simple.Factory.FAIL_FAST,new ClassVisitorWrapper.Chain(),new FieldRegistry.Default(),new MethodRegistry.Default(),MethodLookupEngine.Default.Factory.INSTANCE,FieldAttributeAppender.NoOp.INSTANCE,MethodAttributeAppender.NoOp.INSTANCE,ClassFileLocator.Default.CLASS_PATH,new InlineDynamicTypeBuilder.TargetHandler.ForRebaseInstrumentation(new MethodRebaseResolver.MethodNameTransformer.Suffixing())).make().load(getClass().getClassLoader(),ClassLoadingStrategy.Default.WRAPPER).getLoaded();
  assertThat(loaded.getName(),is(FOOBAR));
  assertThat(loaded.getModifiers(),is(Opcodes.ACC_PUBLIC | Opcodes.ACC_STATIC));
  assertThat(loaded.getAnnotation(Bar.class),notNullValue());
  assertThat(Serializable.class.isAssignableFrom(loaded),is(true));
  assertThat(loaded.getDeclaredFields().length,is(1));
  assertThat(loaded.getDeclaredField(FOO).getModifiers(),is(Opcodes.ACC_PRIVATE | Opcodes.ACC_FINAL));
  assertThat(loaded.getDeclaredField(FOO).getAnnotation(Bar.class),notNullValue());
  assertEquals(String.class,loaded.getDeclaredField(FOO).getType());
  assertThat(loaded.getDeclaredMethods().length,is(2));
  assertThat(loaded.getDeclaredMethod(FOO).getModifiers(),is(Opcodes.ACC_PUBLIC));
  assertThat(loaded.getDeclaredMethod(FOO).getAnnotation(Bar.class),notNullValue());
  assertThat(new MethodList.ForLoadedType(loaded).filter(not(named(FOO)).and(isMethod())).getOnly().getModifiers(),is(MethodRebaseResolver.REBASED_METHOD_MODIFIER));
  assertEquals(String.class,loaded.getDeclaredMethod(FOO).getReturnType());
  assertThat(loaded.getDeclaredConstructors().length,is(2));
  assertThat(loaded.getDeclaredConstructor().getModifiers(),is(Opcodes.ACC_PUBLIC));
  assertThat(loaded.getDeclaredConstructor().getAnnotation(Bar.class),notNullValue());
  assertThat(new MethodList.ForLoadedType(loaded).filter(takesArguments(1).and(isConstructor())).getOnly().getModifiers(),is(MethodRebaseResolver.REBASED_METHOD_MODIFIER));
  assertThat(loaded.getDeclaredMethod(FOO).invoke(loaded.newInstance()),is((Object)FOO));
}
