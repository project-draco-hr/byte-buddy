{
  Class<?> loaded=new InlineDynamicTypeBuilder<Foo>(ClassFileVersion.forCurrentJavaVersion(),new NamingStrategy.Fixed(FOOBAR),new TypeDescription.ForLoadedType(Foo.class),new TypeList.ForLoadedType(Arrays.<Class<?>>asList(Serializable.class)),Opcodes.ACC_PUBLIC,TypeAttributeAppender.NoOp.INSTANCE,isDeclaredBy(Object.class),BridgeMethodResolver.Simple.Factory.FAIL_FAST,new ClassVisitorWrapper.Chain(),new FieldRegistry.Default(),new MethodRegistry.Default(),MethodLookupEngine.Default.Factory.INSTANCE,FieldAttributeAppender.NoOp.INSTANCE,MethodAttributeAppender.NoOp.INSTANCE,ClassFileLocator.ForClassLoader.ofClassPath(),InlineDynamicTypeBuilder.TargetHandler.ForRedefinitionInstrumentation.INSTANCE).defineMethod(BAR,int.class,Arrays.<Class<?>>asList(long.class,Object.class),Visibility.PUBLIC).throwing(IOException.class).withoutCode().make().load(getClass().getClassLoader(),ClassLoadingStrategy.Default.WRAPPER).getLoaded();
  assertThat(loaded.getName(),is(FOOBAR));
  assertThat(loaded.getModifiers(),is(Opcodes.ACC_PUBLIC | Opcodes.ACC_STATIC));
  assertThat(loaded.getAnnotation(Bar.class),notNullValue());
  assertThat(Serializable.class.isAssignableFrom(loaded),is(true));
  assertThat(loaded.getDeclaredFields().length,is(1));
  assertThat(loaded.getDeclaredField(FOO).getModifiers(),is(Opcodes.ACC_PRIVATE | Opcodes.ACC_FINAL));
  assertThat(loaded.getDeclaredField(FOO).getAnnotation(Bar.class),notNullValue());
  assertEquals(String.class,loaded.getDeclaredField(FOO).getType());
  assertThat(loaded.getDeclaredMethods().length,is(2));
  Method method=loaded.getDeclaredMethod(BAR,long.class,Object.class);
  assertThat(method.getName(),is(BAR));
  assertThat(method.getExceptionTypes().length,is(1));
  assertThat(Arrays.asList(method.getExceptionTypes()),hasItem(IOException.class));
  assertThat(method.getDeclaredAnnotations().length,is(0));
  assertThat(loaded.getDeclaredMethod(FOO).getModifiers(),is(Opcodes.ACC_PUBLIC));
  assertThat(loaded.getDeclaredMethod(FOO).getAnnotation(Bar.class),notNullValue());
  assertEquals(String.class,loaded.getDeclaredMethod(FOO).getReturnType());
  assertThat(loaded.getDeclaredConstructors().length,is(1));
  assertThat(loaded.getDeclaredConstructor().getModifiers(),is(Opcodes.ACC_PUBLIC));
  assertThat(loaded.getDeclaredConstructor().getAnnotation(Bar.class),notNullValue());
  assertThat(loaded.getDeclaredMethod(FOO).invoke(loaded.newInstance()),is((Object)FOO));
}
