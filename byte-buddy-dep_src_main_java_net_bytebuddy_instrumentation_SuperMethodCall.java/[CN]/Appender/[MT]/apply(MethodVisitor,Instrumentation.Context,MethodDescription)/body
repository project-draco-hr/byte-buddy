{
  StackManipulation superMethodCall=instrumentedMethod.isDefaultMethod() && instrumentationTarget.getTypeDescription().getInterfaces().contains(instrumentedMethod.getDeclaringType()) ? instrumentationTarget.invokeDefault(instrumentedMethod.getDeclaringType(),instrumentedMethod.getUniqueSignature()) : instrumentationTarget.invokeSuper(instrumentedMethod,Target.MethodLookup.Default.EXACT);
  if (!superMethodCall.isValid()) {
    throw new IllegalStateException("Cannot call super (or default) method of " + instrumentedMethod);
  }
  StackManipulation.Size stackSize=new StackManipulation.Compound(MethodVariableAccess.loadThisReferenceAndArguments(instrumentedMethod),superMethodCall,terminationHandler.of(instrumentedMethod)).apply(methodVisitor,instrumentationContext);
  return new Size(stackSize.getMaximalSize(),instrumentedMethod.getStackSize());
}
