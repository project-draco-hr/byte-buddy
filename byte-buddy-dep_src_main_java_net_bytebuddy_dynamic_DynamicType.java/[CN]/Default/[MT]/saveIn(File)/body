{
  Map<TypeDescription,File> savedFiles=new HashMap<TypeDescription,File>();
  File target=new File(folder,typeDescription.getName().replace('.',File.separatorChar) + CLASS_FILE_EXTENSION);
  if (target.getParentFile() != null) {
    if (!target.getParentFile().mkdirs()) {
      Logger.getAnonymousLogger().info("Writing file to existing folder structure: " + target.getParent());
    }
  }
  OutputStream outputStream=new FileOutputStream(target);
  try {
    outputStream.write(binaryRepresentation);
  }
  finally {
    outputStream.close();
  }
  savedFiles.put(typeDescription,target);
  for (  DynamicType auxiliaryType : auxiliaryTypes) {
    savedFiles.putAll(auxiliaryType.saveIn(folder));
  }
  return savedFiles;
}
