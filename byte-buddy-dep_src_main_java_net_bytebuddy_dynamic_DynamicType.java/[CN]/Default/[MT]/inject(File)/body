{
  File temporary=inject(jar,File.createTempFile(jar.getName(),TEMP_SUFFIX));
  try {
    InputStream jarInputStream=new BufferedInputStream(new FileInputStream(temporary));
    try {
      OutputStream jarOutputStream=new BufferedOutputStream(new FileOutputStream(jar));
      try {
        byte[] buffer=new byte[BUFFER_SIZE];
        int index;
        while ((index=jarInputStream.read(buffer)) != END_OF_FILE) {
          jarOutputStream.write(buffer,FROM_BEGINNING,index);
        }
      }
  finally {
        jarOutputStream.close();
      }
    }
  finally {
      jarInputStream.close();
    }
  }
  finally {
    if (!temporary.delete()) {
      Logger.getAnonymousLogger().warning("Cannot delete " + temporary);
    }
  }
  return jar;
}
