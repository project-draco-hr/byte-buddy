{
  if (!file.createNewFile()) {
    Logger.getAnonymousLogger().info("Overwriting existing file: " + file);
  }
  JarOutputStream outputStream=new JarOutputStream(new BufferedOutputStream(new FileOutputStream(file)),manifest);
  try {
    for (    Map.Entry<TypeDescription,byte[]> entry : getAuxiliaryTypes().entrySet()) {
      outputStream.putNextEntry(new JarEntry(entry.getKey().getInternalName() + CLASS_FILE_EXTENSION));
      outputStream.write(entry.getValue());
      outputStream.closeEntry();
    }
    outputStream.putNextEntry(new JarEntry(typeDescription.getInternalName() + CLASS_FILE_EXTENSION));
    outputStream.write(binaryRepresentation);
    outputStream.closeEntry();
  }
  finally {
    outputStream.close();
  }
  return file;
}
