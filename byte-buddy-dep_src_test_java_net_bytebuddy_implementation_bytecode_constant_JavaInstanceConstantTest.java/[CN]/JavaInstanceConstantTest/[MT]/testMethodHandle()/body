{
  when(javaInstance.asConstantPoolValue()).thenReturn(FOO);
  StackManipulation stackManipulation=new JavaInstanceConstant(javaInstance);
  StackManipulation.Size size=stackManipulation.apply(methodVisitor,implementationContext);
  assertThat(size.getSizeImpact(),is(1));
  assertThat(size.getMaximalSize(),is(1));
  verify(javaInstance).asConstantPoolValue();
  verifyNoMoreInteractions(javaInstance);
  verify(methodVisitor).visitLdcInsn(FOO);
  verifyNoMoreInteractions(methodVisitor);
  verifyZeroInteractions(implementationContext);
}
